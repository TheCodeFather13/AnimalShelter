@page "/sections"
@using AnimalShelterCore;
@using UseCases.DataAnimalsPluginInterfaces;
@using UseCases.SectionUseCasesInterfaces;

@inject NavigationManager NavigationManager
@inject ISectionRepository SectionRepository
@inject IViewSectionsUseCase ViewSectionsUseCase


<h2 class="bgForOl" style="margin:10px;text-align:center;border-radius:5px;padding:8px;">Полезные статьи</h2>

@if(sections == null)
{
    <h2 class="bgForOl" style="margin:10px;text-align:center;border-radius:5px;padding:8px;">Страница статей пуста!</h2>
}
else
{
   <div class="flexForImg">
        @foreach(var section in sections)
        {
            <div class="flexForImg2">
                <div class="containerForAnimalsDescription">
                    <h4 style="text-align:center;padding:5px">@(section.Title)</h4>
                    <button class="btn btn-info" @onclick="@(() => OnInfoSection(section))">Узнать</button>
                </div>
                <img src="@(section.ImagePath)" class="imgForAnimals" />
            </div>
        }
    </div>
}

@code {

    private IEnumerable<Section> sections;
    protected List<Section> searchSectionData = new();

    protected override void OnInitialized()
    {
        base.OnInitialized();
        sections = ViewSectionsUseCase.Execute();
        searchSectionData = sections.ToList();    
    }

    private void OnInfoSection(Section section)
    {
        NavigationManager.NavigateTo($"/sectioninfo/{section.SectionId}");
    }

    private void OnGoToDogTravel()
    {
        NavigationManager.NavigateTo("/dogtravel");
    }

    private void OnGoToDogVaccination()
    {
        NavigationManager.NavigateTo("/dogvaccination");
    }

    private void OnGoToDogExhibition()
    {
        NavigationManager.NavigateTo("/dogexhibition");
    }

    private void OnGoToDogForChildren()
    {
        NavigationManager.NavigateTo("/dogforchildren");
    }

    private void OnGoToCatPregnant()
    {
        NavigationManager.NavigateTo("/catpregnant");
    }

    private void OnGoToCatFood()
    {
        NavigationManager.NavigateTo("/catfood");
    }

    private void OnGoToCatIntoxication()
    {
        NavigationManager.NavigateTo("/catintoxication");
    }

    private void OnGoToCatTray()
    {
        NavigationManager.NavigateTo("/cattray");
    }

    private void OnGoToCatToys()
    {
        NavigationManager.NavigateTo("/cattoys");
    }

}
